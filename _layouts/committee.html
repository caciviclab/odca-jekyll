---
layout: default
---
{% assign empty_array = '' | split: '' %}
{% assign committee = page %}
{% capture ballot_path %}{{ committee.election }}.md{% endcapture %}
{% assign ballot_path = ballot_path | replace: "/.md", ".md" %}
{% assign ballot = site.elections | where: "path", ballot_path | first %}
{% assign locality = site.localities | where: "locality_id", ballot.locality | first %}
{% assign election_day = ballot.election | date: '%Y-%m-%d' %}
{% assign finance = site.data.committees[locality.slug][election_day][committee.filer_id] %}
{% assign contributions = finance.contributions | default: empty_array | sort: 'Tran_Amt1' | reverse %}

<header class="grid">
  <h1 class="grid-col-12">{{ committee.name }}</h1>
</header>
<article class="l-committee grid">
  <div class="grid-col-12">
    <h2>Contributions</h2>
    <div class="total-contributions">
      Total money raised to date:
      <span class="money">{{ finance.total_contributions | dollars }}</span>
    </div>
    {% if committee.data_warning %}
      <div class="grid grid--full grid--narrow grid--left">
        <div class="grid-col-12">
          {% include alert-message.html message=committee.data_warning %}
        </div>
      </div>
    {% endif %}
    {% if contributions == empty %}
      <p>
        Sorry, there is no contribution data available for this committee. Note
        that contributor tables do not presently include loans, although funds
        from loans are included in the total contributions received.
      </p>
    {% else %}
      <p class="note">
        Contributor tables do not presently include loans, although funds
        from loans are included in the total contributions received.
      </p>
      <contributions-table contributions="{{ contributions | jsonify | escape }}"></contributions-table>
    {% endif %}
  </div>
</article>
